Metadata-Version: 2.4
Name: curateur
Version: 1.0.0
Summary: ScreenScraper ROM Metadata & Media Scraper for ES-DE
Author: jbruns
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: PyYAML>=6.0
Requires-Dist: lxml>=4.9.0
Requires-Dist: requests>=2.31.0
Requires-Dist: Pillow>=10.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"

# curateur

ScreenScraper ROM Metadata & Media Scraper for ES-DE

## Overview

Curateur is a Python-based tool that scans ROM directories, queries the ScreenScraper API for game metadata and media, and generates ES-DE compatible `gamelist.xml` files with downloaded media organized by type.

## Installation

### Requirements

- Python 3.8 or higher
- ScreenScraper account (for user credentials)
- Developer credentials (hardcoded in application)

### Setup

1. Clone the repository:
```bash
git clone <repository-url>
cd curateur
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

Or install in development mode:
```bash
pip install -e .
```

3. Configure credentials:
```bash
# Copy example config
cp config.yaml.example config.yaml

# Edit config.yaml and add your ScreenScraper user credentials
# (developer credentials are hardcoded in the application)
```

## Configuration

The `config.yaml` file controls all aspects of scraping behavior. See `config.yaml.example` for detailed documentation of all options.

### Required Settings

- `screenscraper.user_id`: Your ScreenScraper username
- `screenscraper.user_password`: Your ScreenScraper password
- `paths.roms`: Directory containing ROM files
- `paths.media`: Destination for downloaded media
- `paths.gamelists`: Destination for gamelist.xml files
- `paths.es_systems`: Path to ES-DE es_systems.xml

### Key Options

- `scraping.systems`: Limit scraping to specific systems (e.g., `[nes, snes]`)
- `scraping.media_types`: Which media to download (covers, screenshots, etc.)
- `scraping.preferred_regions`: Region priority for media selection
- `runtime.dry_run`: Preview mode without downloads

## Usage

### Basic Usage

```bash
# Scrape all systems defined in es_systems.xml
curateur

# Scrape specific systems only
curateur --systems nes snes genesis

# Dry-run mode (no downloads)
curateur --dry-run

# Use custom config file
curateur --config /path/to/config.yaml
```

### Command-Line Options

- `--config PATH`: Path to config.yaml (default: ./config.yaml)
- `--systems SYSTEM [SYSTEM ...]`: System short names to scrape
- `--dry-run`: Scan and query API without downloading media
- `--version`: Show version and exit

## Project Structure

```
curateur/
├── curateur/
│   ├── __init__.py
│   ├── cli.py              # Command-line interface
│   ├── api/                # API client and authentication
│   │   ├── credentials.py  # Developer credential storage
│   │   ├── obfuscator.py   # Credential obfuscation utilities
│   │   └── system_map.py   # Platform to systemeid mapping
│   ├── config/             # Configuration management
│   │   ├── loader.py       # Config file loading
│   │   ├── validator.py    # Config validation
│   │   └── es_systems.py   # ES-DE systems parsing
│   ├── scanner/            # ROM scanning
│   ├── media/              # Media downloading
│   ├── gamelist/           # Gamelist generation
│   └── tools/              # Maintenance utilities
│       ├── setup_dev_credentials.py
│       └── generate_system_map.py
├── tests/                  # Test suite
├── config.yaml.example     # Configuration template
├── requirements.txt        # Python dependencies
├── pyproject.toml          # Package metadata
└── IMPLEMENTATION_PLAN.md  # Detailed architecture docs
```

## Development

### Setting Up Developer Credentials (Maintainer Only)

Developer credentials are obfuscated and stored in `curateur/api/credentials.py`:

```bash
python -m curateur.tools.setup_dev_credentials
```

Follow the prompts and copy the generated constants to `credentials.py`.

### Updating Platform Mapping

When ScreenScraper adds new systems or es_systems.xml is updated:

```bash
# Fetch latest systemesListe.xml from ScreenScraper API first
python -m curateur.tools.generate_system_map \
    --es-systems es_systems.xml \
    --systemes-liste systemesListe.xml
```

### Running Tests

```bash
pytest tests/
```

## Implementation Status

### MVP Phase 1 - Core Infrastructure ✓ COMPLETED
- Configuration system with validation
- ES-DE systems parsing
- Credential obfuscation system
- Platform-to-systemeid mapping
- CLI framework with argument parsing

### MVP Phase 2 - ROM Scanner (IN PROGRESS)
- Standard ROM scanning
- M3U playlist handling
- Disc subdirectory support
- CRC32 hash calculation

### MVP Phase 3 - API Client & Verification (PLANNED)
- ScreenScraper API integration
- Name verification and fuzzy matching
- Error handling and retry logic

### MVP Phase 4 - Media Downloader (PLANNED)
- Media downloading with region prioritization
- Image validation
- Filesystem organization

### MVP Phase 5 - Gamelist Generator (PLANNED)
- XML generation with proper encoding
- Media path management

### MVP Phase 6 - Runtime Integration (PLANNED)
- Progress tracking and logging
- Error summary generation

### Milestone 2 (FUTURE)
- Skip mode for incremental updates
- Checkpoint/resume functionality
- Search fallback for unmatched ROMs
- Media cleanup for changed/removed ROMs

## Documentation

- `IMPLEMENTATION_PLAN.md`: Complete architecture and design document
- `TODO.md`: Implementation tracking and task list
- `tests/ACCEPTANCE_TESTS.md`: Test specifications

## License

[License information to be added]

## Credits

Built for use with [ES-DE](https://es-de.org/) frontend.
Game metadata provided by [ScreenScraper](https://www.screenscraper.fr/).
